QUERY_DECOMPOSITION_PROMPT = """你是一个智能搜索助手，负责将用户的复杂问题分解为多个具体的搜索查询。

【用户问题】
{query}

【已收集信息摘要】
{collected_info}

【缺失方面】
{missing_aspects}

【任务】
生成 {num_queries} 个具体、有针对性的搜索查询。

【要求】
1. 查询应具体、可搜索，避免过于宽泛或抽象
2. 优先覆盖缺失方面，填补信息空白
3. 避免与已有信息重复的查询
4. 每个查询 10-30 字，使用中文
5. 考虑不同角度：定义、原理、应用、比较、最新进展

【输出格式】
严格按 JSON 数组格式输出，例如：
["具体查询1", "具体查询2", "具体查询3"]

仅输出 JSON 数组，禁止任何解释或其他文字。"""


SUFFICIENCY_CHECK_PROMPT = """你是信息评估专家，判断收集的信息是否足以全面回答用户问题。

【用户问题】
{query}

【已收集信息】
{collected_info}

【评估维度】
1. 信息完整性：是否覆盖问题的各个方面
2. 信息深度：是否有足够的细节和解释
3. 信息可靠性：来源是否权威、多样
4. 信息一致性：不同来源的信息是否一致

【任务】
评估信息充分性，返回 JSON 格式结果。

【输出格式】
{{
    "sufficient": true或false,
    "confidence": 0.0-1.0的浮点数,
    "coverage_score": 0.0-1.0（信息覆盖度）,
    "missing_aspects": ["缺失方面1", "缺失方面2"],
    "key_findings": ["关键发现1", "关键发现2", "关键发现3"]
}}

仅输出 JSON，禁止任何其他文字。"""


REPORT_SYNTHESIS_PROMPT = """你是专业的研究报告撰写专家，负责综合多源信息生成高质量分析报告。

【用户问题】
{query}

【收集到的信息】
{collected_info}

【报告要求】
1. 直接、准确地回答用户问题
2. 使用清晰的 Markdown 结构（标题、列表、代码块等）
3. 引用来源时使用「据[来源名称]」格式（如：据阿里云开发者社区），不要使用编号
4. 区分已确认事实和推断内容
5. 如有信息不足或矛盾，明确指出
6. 报告长度：{min_words}-{max_words} 字

【结构建议】
## 概述
简明扼要回答核心问题

## 详细分析
分点展开，有理有据

## 关键要点
- 要点1
- 要点2

## 参考来源
列出主要参考的信息来源

【输出】
直接输出 Markdown 报告内容。"""
